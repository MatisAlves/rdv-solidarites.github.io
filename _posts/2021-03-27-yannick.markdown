---
layout: post
title:  "Journal de Yannick"
date:   2021-03-27
---

Travaux sur l'administratif une bonne partie de la matinée.

J'ai également discuté avec Rémy, le dev de Mon Suivi Justice pour parler SMS, hébergement, linter & co

Nicolas m'invite à livrer la PR #2 sur la configuration de SMS. Je crois que j'ai peur que ça ne fonctionne pas. Nous allons tester sur une review app.  C'est là que j'aimerais avoir les référentes en direct, sur un outil de discussion instantanée, pour pouvoir les prévenir de ce que nous allons faire.

Mise à jour et merge de la PR #2 à propos de la config SMS. J'en profite pour tester sur le Review App avant, pour essayer de regarder comment surveiller les SMS depuis Netsize. C'est pas top. Reste donc la surveillance des jobs, mais c'est pas top tel quel. J'en profite pour faire une PR où on range les job dans des queues spécifique.

Traitement de quelques mails à faire suivre aux agents.

Discussions avec Christelle (64) vis-à-vis d'un soucis sur la sectorisation. Il semblerais que la configuration, en plus de ne pas être très claire, mériterais quelques changements. Peut-être séparer l'affectation de la création de secteurs. Et sur l'affectation, faire apparaître le trio `Secteur-Motif-Orga_ou_agent` semblerait plus efficace.

Discussion avec l'équipe Data.Insertion à propos de développement nécessaire pour eux

Revue de la 3eme PR sur les notifications Agent.

Je prépare un script pour l'import des absences en CSV pour le 92. J'hésite sur la marche à suivre, comment injecter un fichier CSV sur le serveur distant ? J'opte pour le fait d'écrire le CSV dans le fichier, et de copier le tout pour le coller dans un terminal. C'est sans doute un peu bof, mais ça m'évite:
- de mettre le contenu du fichier en ligne ou dans le code source du projet
- de bricoler avec les API (ça serait une solution élégante)
- de faire un développement spécifique (vraiment pas envie de propose des interfaces d'import...).

Bon, ça ne fonctionne pas. Je vais mettre le script dans le versionning, tant pis. Les adresses des agents sont sans doute public de toute façon.

Finalement, j'ai utilisé [NGROK](ngrok.com) sur les suggestions de Pierre (merci à lui ;-)). Je n'étais pas du tout en phase avec le fait d'exposer des données, même si celle-ci sont les emails d'agent, et leurs absences. Par contre, j'ai raté une chose : le blocage des notifications. Je ne suis vraiment pas à l'aise du tout avec ces notifications via les callbacks d'ActiveRecord.


